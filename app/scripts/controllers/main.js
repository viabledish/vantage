'use strict';

angular.module('vantageApp')
  .controller('MainCtrl', function ($scope, $http) {
    $scope.awesomeThings = [
      'HTML5 Boilerplate',
      'AngularJS',
      'Karma'
    ];

    $scope.items = [];
    $scope.chartData = [];
    $scope.chartConfig = {};

  var getItems = function() {
    $http.jsonp('http://api.nytimes.com/svc/elections/us/v3/finances/2008/president/totals.json?api-key=85c32d59cd9256167606de14f60ebe95:11:20721543&callback=JSON_CALLBACK').success(function (data) {
      $scope.items = data;
    });
  };

  getItems();

  $scope.map = function () {
    var mapData = [
        {
          "name": "MI",
          "path": "M752,183,749,175,746,165,744,161,741,159,739,161,735,162,733,168,730,172,729,173,727,172C727,172,724,170,724,170,725,169,725,164,725,164L729,163,729,159,730,156,733,155,732,144,731,141,729,141,728,138,729,137,731,138,731,136,729,134,727,131,724,131,719,129,714,126,711,126,710,126,709,126,706,123,702,125,699,128,700,132,701,132,703,132,703,133,701,134,698,134,696,136,696,139,696,140,697,146,693,149,692,148,692,144,693,141,694,139,693,138,691,139,690,143,687,144,685,147,685,148,686,148,685,151,683,152,683,153,684,156,682,162,681,167,681,172,682,173,681,175,681,176,680,179,684,186,687,193,689,198,688,203,687,209,684,215,684,218,680,221,685,221,708,219,716,218,716,219,724,218,735,216,739,216,739,215,739,214,741,210,744,208,743,202,745,201,746,200,746,197,748,193,749,194,749,195,750,195,752,194,752,183zM627,81,629,79,631,78,637,74,639,73,640,73,634,79,631,81,628,82,627,81zM720,115,720,118,724,118,725,117C725,117,725,115,725,115,724,115,723,113,723,113L721,114,719,114,719,115,720,115zM612,112,612,112,615,111,619,108,619,107,620,107,626,105,629,103,634,101,634,100,636,97,638,96,639,94,642,91,646,89,651,88,653,89,652,91,648,92,647,95,644,96,644,98,641,102,641,105,642,105,643,104,646,101,648,102,650,102,654,103,655,104,657,108,660,111,664,111,666,110,667,111,669,111,670,111,672,111,673,109,678,106,681,104,689,104,693,102,696,101,698,101,698,107,698,107,702,108,704,108,710,106,711,105,713,105,713,113,716,116,718,117,719,118,718,118,717,118,713,117,711,118,708,118,705,119,703,119,697,118,691,118,689,121,681,122,679,122,678,126,676,127,676,127,674,125,669,128,669,128,667,126,666,126,664,131,663,135,660,143,659,142,657,140,655,129,651,128,649,125,636,122,633,121,624,119,616,118,612,112z"
        },
        {
          "name": "HI",
          "path": "M251,552,253,548,256,548,256,549,254,552,251,552zM262,548,269,551,271,550,273,546,272,543,268,542,263,544,262,548zM295,559,299,565,302,564,303,564,305,565,309,565,310,564,307,562,304,558,302,554,296,557,295,559zM317,568,318,566,323,567,324,567,331,568,330,569,328,571,323,570,317,568zM323,574,325,578,328,577,329,575,327,573,323,573,323,574zM330,573,333,570,338,572,342,573,347,576,347,579,343,580,338,581,335,580,330,573zM348,589,350,588,354,590,362,594,365,596,367,599,369,603,374,606,373,607,369,611,365,612,363,612,360,614,357,617,355,620,353,620,349,617,349,612,349,610,348,604,345,602,345,599,348,598,350,595,350,594,349,592,348,589z"
        },
        {
          "name": "AK",
          "path": "M170,481,170,573,172,574,175,574,177,573,179,573,180,576,187,584,188,587,191,584,192,584,192,581,194,579,195,579,197,577,200,580,201,583,203,584,204,587,209,589,212,595,215,599,218,602,219,606,225,608,230,610,231,615,232,618,231,622,229,624,227,624,226,620,223,619,221,618,220,618,221,621,222,625,220,626,218,624,216,622,216,624,218,626,217,627C217,627,216,627,216,626,215,625,213,622,213,622L212,620C212,620,212,621,211,621,211,621,210,619,210,619L212,617,210,616,210,610,209,610,208,614,207,614,206,610,205,606,205,606,205,612,205,613,203,612,200,605,197,605,197,601,195,598,193,596,193,594,195,593,195,592,192,593,188,590,186,587,180,584,176,582,177,578,177,576,176,578,172,579,168,578,162,576,156,576,156,576,149,572,146,572,143,565,140,566,136,567,136,572,138,569,139,569,137,574,140,571,141,573,137,577,136,577,135,575,134,574,132,575,129,573,126,576,124,578,120,580,115,580,115,578,119,577,119,576,116,575,118,572,120,568,120,566,120,565,125,563,126,564,129,564,127,562,123,561,118,564,115,568,113,571,112,573,108,575,104,577,104,579,107,580,107,583,104,586,97,591,89,595,87,596,81,598,75,600,77,601,76,603,75,604,72,603,69,603,68,606,67,606,67,603,63,604,60,606,57,604,53,606,50,606,48,608,46,608,44,608,41,607,38,608,37,609,36,607,36,605,39,604,46,605,50,603,53,601,56,600,58,599,61,599,62,601,64,600,66,597,69,596,73,596,74,595,75,596,76,596,77,592,82,590,84,586,86,581,88,580,88,577,86,578,83,579,82,576,81,576,80,577,80,580,78,580,76,574,75,575,74,575,73,573,69,573,67,574,64,574,66,572,66,569,65,567,67,566,68,566,68,564,68,559,67,558,66,560,59,560,58,558,57,554,55,550,55,549,57,549,57,546,58,545,57,545,56,545,55,542,56,537,61,533,64,531,66,527,69,526,71,527,72,530,74,530,78,527,80,528,81,528,82,528,85,527,86,522C86,522,86,519,87,519,87,518,88,518,88,518L87,515,84,516,80,517,78,517,74,515,69,515,65,511,66,506,66,504,64,502,62,498,62,497,70,497,72,497,73,498,74,498,74,496,78,495,81,495,82,497,81,499,80,500,83,502,88,504,90,503,88,498,87,495,88,494,84,492,84,491,84,489,83,485,80,480,78,475,81,473,84,473,86,474,91,474,95,470,96,467,100,464,102,465,105,464,109,462,110,462,111,463,116,463,119,459,120,459,124,462,126,464,125,465,126,467,128,465,132,465,132,469,134,471,142,471,149,476,150,475,156,478,158,477,160,476,166,478,170,481zM46,513,49,518,48,519,45,519,43,515,41,513,39,513,39,510,41,508,42,510,43,512,46,513zM43,549,47,549,51,550,52,552,51,556,47,555,44,552,43,549zM21,533,22,536,24,538,22,539,20,536,20,533,21,533zM6,612,10,610,14,609,16,609,17,611,19,611,21,609,21,607,24,607,27,610,26,611,21,613,18,612,14,611,9,613,8,613,6,612zM59,607,61,609,63,608,62,606,59,607zM62,611,64,608,66,608,65,611,62,611zM88,608,89,610,90,609,89,607,88,608zM97,595,98,601,102,602,107,599,112,596,110,594,110,591,108,592,105,592,107,590,109,591,113,589,114,588,111,587,112,585,109,587,104,591,99,594,97,595zM143,574,145,572,144,570,142,571,143,574z"
        },
        {
          "name": "FL",
          "path": "M819,466,821,474,825,484,831,494,835,501,840,507,845,511,846,514,845,515,844,517,847,525,851,528,853,534,857,540,862,549,863,557,864,570,865,572,864,575,862,577,862,579,861,581,862,584,862,586,859,589,856,591,852,591,850,593,848,594,846,593,845,592,845,589,844,585,840,580,836,577,832,577,831,578,828,574,827,570,824,566,822,564,821,567,819,566,817,561,813,557,810,551,807,548,804,544,806,541,809,535,809,533,804,532,803,533,803,534,806,535,804,540,803,540,801,536,800,531,800,528,801,523,801,512,798,508,797,505,791,504,789,503,787,500,783,498,782,495,779,494,777,490,772,488,769,486,766,486,762,487,762,489,763,490,762,492,759,492,755,495,751,497,747,497,743,499,743,496,741,494,738,493,736,491,728,487,719,485,715,486,708,486,702,488,698,489,698,480,695,478,693,476,693,473,704,472,732,469,739,468,745,468,748,472,749,474,758,474,770,474,793,472,799,472,804,472,805,475,807,476,807,471,806,466,807,465,813,465,819,466zM832,608,835,608,836,607,838,605,840,603,842,604,844,604,844,605,840,606,836,608,833,609,832,608zM847,603,848,604,851,602,857,597,861,593,864,586,865,584,865,580,864,581,863,584,861,589,858,595,853,599,850,601,847,603z"
        },
        {
          "name": "NH",
          "path": "M949,146,950,145,951,141,949,140,948,137,944,136,944,133,936,107,931,92,930,92,929,93,928,93,927,92,926,94,926,99,926,106,928,109,928,113,924,118,921,120,921,121,923,123,923,132,922,142,921,147,923,148,922,153,922,155,923,156,941,151,943,151,945,148,949,146z"
        },
        {
          "name": "VT",
          "path": "M910,158,910,153,907,141,907,141,903,139,904,136,903,134,901,129,902,125,901,119,898,112,897,107,926,100,926,106,928,109,928,113,924,118,921,120,921,121,923,122,922,131,922,141,921,147,922,148,922,153,922,155,923,156,915,158,910,158z"
        },
        {
          "name": "ME",
          "path": "M994,77,997,80,999,84,999,86,997,91,995,91,991,95,986,101C986,101,985,101,984,101,984,101,983,98,983,98L981,99,980,100,978,102,977,103,978,105,978,106,977,109,975,108,975,107,975,105,973,106,972,102,969,103,971,105,971,106,970,108,970,111,971,113,969,115,966,116,965,119,960,122,958,123,957,121,953,125,954,129,953,130,953,135,951,142,949,140,948,137,944,136,944,133,936,108,931,92,932,92,934,92,934,89,935,84,938,79,940,75,938,72,938,66,938,65,939,62,939,60,939,55,941,50,944,40,946,36,948,36,949,36,949,37,950,40,953,40,954,40,954,38,959,35,961,33,962,34,969,36,971,37,980,69,987,69,988,72,988,77,991,79,992,79,992,79,992,77,995,77zM972,110,974,108,975,109,976,112,974,113,972,110zM979,103,981,105C981,105,983,106,983,105,983,105,983,103,983,103L984,102,983,100,981,101,979,103z"
        },
        {
          "name": "RI",
          "path": "M942,185,938,169,945,167,947,169,951,174,954,179,950,180,949,180,948,182,945,184,942,185z"
        },
        {
          "name": "NY",
          "path": "M895,196,894,195,891,195,888,192,887,186,883,186,880,183,859,188,813,197,805,199,804,192,806,190,807,189,808,187,810,186,812,184,813,182,815,180,816,178,816,177,815,174,813,174,811,167,814,165,818,164,823,162,826,162,833,162,835,163,837,163,839,162,842,161,847,160,850,158,852,155,853,153,856,153,858,151,858,149,856,147,856,145,857,143,857,141,855,141,853,141,853,139,852,137,859,131,859,130,861,127,864,122,867,118,869,115,872,113,875,112,881,110,885,111,889,109,898,107,898,112,901,119,902,125,901,129,903,134,904,136,903,139,907,141,907,141,911,153,910,158,909,170,910,176,911,180,913,187,913,196,912,199,914,201,914,203,912,204,913,206,914,205,916,204,918,201,919,201,921,201,923,201,932,197,935,194,936,193,941,195,937,198,933,201,926,207,923,208,916,210,912,212,911,211,911,207,911,204,911,202,908,200,903,199,899,198,895,196z"
        },
        {
          "name": "PA",
          "path": "M889,235,891,234,893,233,894,230,896,228,900,224,900,224,897,222,893,219,892,216,889,216,889,215,888,212,891,211,891,208,889,207,890,205,892,202,892,198,895,195,894,195,891,195,888,192,887,186,883,186,880,183,861,188,814,197,805,199,804,192,798,197,797,198,792,201,796,221,798,232,802,253,806,252,819,250,859,242,875,239,884,237,885,237,887,235,889,235z"
        },
        {
          "name": "NJ",
          "path": "M894,195,892,198,892,202,889,205,889,207,891,208,891,211,888,212,889,215,889,216,892,217,893,219,897,222,900,224,900,225,896,227,895,230,893,233,891,234,890,236,890,237,889,240,890,242,894,246,899,248,903,249,904,250,903,251,903,254,904,254,906,252,907,247,910,242,913,235,915,229,914,228,914,218,912,214,911,215,908,215,907,215,909,214,911,212,911,211,910,207,911,204,911,202,908,200,902,199,898,197,894,195z"
        },
        {
          "name": "DE",
          "path": "M890,238,890,236,891,234,889,235,887,235,885,237,887,243,889,249,891,259,893,266,898,266,905,264,903,256,901,257,898,254,896,249,894,245,890,242,889,240,890,238z"
        },
        {
          "name": "MD",
          "path": "M905,264,899,266,893,266,891,258,889,248,886,242,885,237,877,239,861,242,820,250,821,255,823,261,823,261,825,259,828,256,830,255,832,253,834,251,835,251,838,251,841,249,843,247,845,247,847,248,850,249,852,251,853,253,858,255,858,258,864,259,865,260,867,258,870,260,868,263,867,267,866,270,866,272,866,274,872,275,876,275,880,276,882,277,883,274,881,272,881,270,879,268,877,262,878,256,878,254,876,253C876,253,878,251,878,250,878,250,878,248,878,248L881,247,883,245,883,246,882,248,880,252,881,253,882,253,883,259,881,260,881,264,882,264,883,262,885,264,883,265,882,269,885,272,889,273,891,272,895,276,896,277,903,274,905,270,905,264zM888,274,889,277,889,279,890,281C890,281,891,280,891,279,891,279,891,276,891,276L890,274,888,274z"
        },
        {
          "name": "VA",
          "path": "M896,279,896,277,903,274,902,278,899,282,899,287,899,290,897,296,895,298,893,293,894,287,895,282,896,279zM900,310,837,323,797,329,790,328,787,331,779,331,770,332,758,334,769,328,769,325,771,323,782,311,787,315,791,316,793,315,796,314,799,315,803,314,805,309,808,309,811,307,813,308,816,304,816,301,815,300,816,298,822,285,822,279,824,278,826,281,830,280,832,272,835,272,837,269,839,266,842,260,842,254,853,259C854,259,854,253,854,253L858,255,858,258,864,259,866,261,868,263,868,267,865,270,866,272,866,274,872,275,876,275,880,276,882,277,883,280,886,280,887,282,886,287,888,288,887,290,889,291,888,292,886,292,886,294,888,296,888,297,890,299,891,302,888,303,890,305,896,303,900,310z"
        },
        {
          "name": "WV",
          "path": "M820,250,821,255,823,262,825,259,827,256,830,255,832,253,834,251,835,251,838,251,841,249,843,247,845,247,847,248,851,250,853,252,854,253,853,259,847,256,842,255,842,260,839,266,837,269,835,272,833,272,832,276,830,280,826,281,824,278,822,279,822,285,820,288,815,300,816,301,816,303,813,308,811,307,808,309,805,309,803,314C803,314,799,315,798,315,798,315,796,314,796,314L793,315,791,316,787,315,785,314,783,311,780,309,778,305,773,301,773,299,770,297,769,295,769,290,771,290,773,289,773,286,775,284,775,279,776,275,778,274,779,275,779,277,781,276,782,274,781,272,781,270,782,268,784,265,786,263,788,264,790,262,794,258,796,254,796,248,797,243,797,238,796,234,797,233,798,231,802,253,807,252,820,250z"
        },
        {
          "name": "OH",
          "path": "M792,201,786,205,782,208,778,212,774,216,770,217,767,217,761,220,759,220,755,217,750,217,747,216,744,214,739,215,728,217,716,219,717,235,719,250,722,275,723,280,727,280,730,279,733,281,736,286,741,286,743,288,745,288,748,286,750,287,756,287,758,285,761,284,763,283,764,286,766,287,769,289,772,289,773,289,773,286,775,284,775,279C775,279,776,275,776,275L778,274,779,275,780,277,781,276,782,274,781,272,781,270,782,269,784,265,785,263,787,264,790,262,793,259,796,254,796,249,797,243,797,238,796,235,796,233,798,231,796,222,792,201z"
        },
        {
          "name": "IN",
          "path": "M668,316,668,313,668,308,671,305,673,300,675,296,675,290,673,287,673,283,673,277,673,270,672,252,670,236,669,223,672,224,674,225,675,225,678,223,681,221,686,221,710,218,716,218,717,235,722,275,723,281,722,283,724,285,724,287,721,289,717,290,714,291,713,296,708,300,705,304,705,307,705,308,701,308,699,306,697,308,694,309,694,313,693,313,692,312,690,310,686,312,685,315,683,314,682,312,677,313,671,314,668,316z"
        },
        {
          "name": "IL",
          "path": "M668,316,668,313,668,308,671,304,673,300,675,296,675,290,673,286,673,283,673,277,672,269,671,252,670,236,669,223,669,222,668,220,666,216,665,214,663,211,663,205,613,208,614,210,616,211,617,212,618,214,622,218,623,221,622,224,620,228,619,231,617,233,615,234,609,235,608,237,607,239,608,241,610,242,610,247,608,249,607,250,607,253,605,254,604,255,603,256,604,259,602,260,601,263,601,267,604,275,611,283,617,287,617,292,618,293,625,294,628,295,627,299,625,306,624,309,626,313,633,319,638,320,640,325,643,328,642,332,643,336,645,338,647,337,648,335,650,333,653,333,655,334,659,335,661,335,661,333,659,330,660,327,662,326,665,325,666,325,666,323,665,321,666,319,668,316z"
        },
        {
          "name": "CT",
          "path": "M942,185,938,169,933,170,910,175,911,179,913,187,913,196,912,199,914,201,918,196,922,193,924,191,925,191,928,190,934,189,942,185z"
        },
        {
          "name": "WI",
          "path": "M663,205,663,202,661,197,661,190,660,188,661,184,661,181,663,178,662,175,662,171,662,169,664,166,664,163,664,162,664,159,664,155,667,149,670,141,670,139,670,138,669,138,664,145,661,149,659,151,658,154,656,155,655,157,653,156,653,154,655,152,657,147,659,145,660,143,657,140,655,129,651,128,649,125,636,122,633,121,624,119,616,118,612,112,611,113,609,113,609,111,607,112,606,112,604,113,603,112,604,110,606,107,607,106,605,104,603,105,600,107,592,111,588,111,585,111,584,110,582,113,582,116,582,125,581,127,575,131,572,137,573,137,576,140,576,143,574,147,574,151,575,158,578,161,582,161,584,165,587,165,592,171,599,176,601,179,602,187,603,190,606,192,606,193,604,197,604,201,607,205,609,206,613,206,614,208,663,205z"
        },
        {
          "name": "NC",
          "path": "M900,310,902,315,906,322,908,324,909,327,907,327,907,328,907,332,904,334,904,336,902,339,898,341,896,340,894,340,892,339,893,340,893,341,895,341,896,343,894,350,898,350,899,351,901,349,903,348,900,352,897,357,896,357,895,357,892,358,886,360,879,366,875,371,873,378,873,381,868,381,862,383,851,374,838,365,834,365,821,366,816,367,814,363,811,361,794,362,786,363,776,367,769,370,746,373,747,369,749,367,752,366,753,362,757,359,761,358,766,354,771,352,771,348,775,344,776,344C776,344,776,345,777,345,778,345,779,346,779,346L782,342,784,341,786,342,788,338,791,335,792,333,792,329,796,329,804,328,821,325,837,323,861,318,882,313,894,311,900,310zM904,345,907,343,911,340,912,339,912,337,912,330,910,328,909,326,910,326,913,331,914,336,913,340,910,342,907,344,906,345,904,345z"
        },
        {
          "name": "DC",
          "path": "M868,263,866,261,865,260,867,258,870,260,868,263z"
        },
        {
          "name": "MA",
          "path": "M969,179,972,178,972,177,973,177,975,179,973,180,969,180,969,179zM959,180,962,177,964,177,966,179,963,180,961,181,959,180zM922,156,941,151,943,151,945,148,949,146,953,151,950,156,950,158,952,160,953,160,955,160,957,162,961,169,965,169,968,168,970,166,969,163,966,162,965,163,964,161,964,161,967,160,969,161,971,164,972,167,972,170,968,171,963,173,959,178,957,180,957,179,960,177,960,175,959,172,956,173,955,175,956,177,954,179,951,174,947,169,945,167,938,169,932,170,910,175,909,170,910,159,915,158,922,156z"
        },
        {
          "name": "TN",
          "path": "M751,335,695,341,678,343,673,343,669,343,668,348,660,348,652,349,643,348,642,356,640,362,637,365,635,370,635,372,630,375,632,379,631,383,630,384,746,373,747,369,749,367,752,366,753,362,757,359,761,358,766,354,771,352,771,349,775,344,776,344C776,344,776,345,777,345,778,345,779,346,779,346L781,342,784,341,786,341,788,338,791,335,792,333,792,329,790,329,787,331,779,331,759,333,751,335z"
        },
        {
          "name": "AR",
          "path": "M640,362,636,363,630,362,631,360,634,358,635,354,633,351,548,353,550,361,550,369,552,381,552,422,554,424,557,423,560,424,561,431,621,430,622,428,622,424,620,421,622,419,620,416,621,413,622,407,625,405,624,403,628,397,631,396,631,394,631,392,634,386,636,385,637,381,639,380,635,379,634,375,637,372,637,370,639,366,640,362z"
        },
        {
          "name": "MO",
          "path": "M602,260,599,256,598,254,528,257,526,257,527,259,527,262,530,266,533,270,536,273,539,274,540,275,540,278,538,280,538,282,540,286,543,289,546,291,547,303,547,342,548,347,548,353,572,352,597,352,620,351,632,350,635,354,634,358,631,360,630,362,636,363,640,362,642,356,643,350,645,347,648,345,648,342,649,340,647,337,645,338,643,336,642,331,643,328,641,324,639,319,634,319,626,313,624,308,625,305,627,298,628,295,626,294,618,293,617,291,617,287,611,283,604,275,601,267,601,262,602,260z"
        },
        {
          "name": "GA",
          "path": "M724,376,724,378,725,380,725,384,729,392,732,403,733,410,735,415,736,422,739,429,742,433,742,436,744,437,744,440,742,445,742,448,742,450,743,455,744,461,743,463,744,464,745,465,745,469,748,472,750,475,759,475,770,474,794,473,799,472,804,472,805,475,807,476,808,471,806,466,807,465,813,465,819,466,818,459,820,448,822,444,821,441,825,434,825,433,822,433,820,432,819,430,818,426,815,424,812,423,811,418,807,411,803,409,801,407,799,404,797,402,795,401,792,397,789,395,784,393,783,391,781,388,780,387,777,381,773,382,769,379,767,378,767,376,768,374,770,372,770,370,724,376z"
        },
        {
          "name": "SC",
          "path": "M824,432,822,433,820,432,819,430,818,426,815,424,812,423,811,418,808,411,803,409,801,407,799,404,797,402,795,401,792,398,789,395,784,393,784,392,781,389,780,387,777,381,773,382,769,379,767,378,767,376,768,374,770,373,770,370,776,368,786,363,794,362,812,361,814,363,816,367,821,366,834,365,838,366,851,374,862,382,856,388,853,395,853,402,851,403,850,406,847,406,845,410,842,413,840,417,838,418,834,421,831,421,832,425,827,431,824,432z"
        },
        {
          "name": "KY",
          "path": "M782,311,780,313,776,317,771,323,769,325,769,327,765,330,759,333,751,335,695,341,678,343,673,343,669,343,668,348,660,348,652,349,644,348,645,347,648,345,648,342,649,340,647,337,648,335,650,333,653,333,656,334,659,335,661,335,661,333,659,330,660,327,662,326,665,325,666,325,665,323,665,321,666,319C666,319,668,316,668,315L671,314,677,313,682,312,683,314,685,315,686,312,690,310,692,312,693,313,694,313,694,310,697,308,700,306,701,308,705,308,705,307,705,304,708,300,713,296,714,291,717,290,721,289,724,287,723,285,722,283,723,280,727,280,730,279,733,281,736,286,741,286,743,288,745,288,748,286,753,287,756,287,758,285,761,284,763,283,764,286,766,287,769,289,769,295,770,297,772,299,773,301,778,305,780,309,782,311z"
        },
        {
          "name": "AL",
          "path": "M680,489,679,473,676,453,676,438,677,404,677,386,677,379,725,376,725,378,725,380,725,384,729,392,732,403,733,410,735,415,737,422,739,429,742,433,742,436,744,437,744,440,742,445,742,448,742,450,744,455,744,461,743,463,744,464,745,465,746,468,740,468,732,469,705,472,694,473,693,476,695,478,698,480,699,489,693,492,690,491,693,489,693,488,689,482,687,481,685,486,684,489,683,489,680,489z"
        },
        {
          "name": "LA",
          "path": "M655,487,652,484,653,478,652,477,642,478,615,478,614,476,615,467,619,460,624,451,624,448,625,448,626,446,623,443,623,441,621,437,621,430,561,431,561,441,562,451,563,455,565,460,566,465,571,471,571,475,572,475,571,484,568,490,570,492,569,495,568,503,567,506,567,510,572,508,585,509,596,512,603,514,607,512,611,513,614,514,615,512,611,511,609,511,606,510C606,510,606,508,607,508,607,508,610,507,610,507L612,509,614,508,617,508,619,511,619,513,624,514,626,516,625,517,624,518,625,520,634,524,638,522,639,520,642,519,644,518,645,519,646,522,644,523,645,523,648,522,651,518,652,518,649,517,650,516,650,514,652,514,653,512,654,513C654,513,654,516,655,516,656,516,659,517,659,517L664,519,665,521,668,521,669,522,672,518,672,517,670,517,667,514,660,513,657,511,658,508,660,508,661,507,659,506,659,506,662,506,664,502,663,500,662,497,661,498,659,500,658,503,655,502,654,500,656,498,658,494,656,492,655,487z"
        },
        {
          "name": "MS",
          "path": "M681,487,680,489,675,489,673,488,671,488,664,490,662,489,659,493,658,494,656,491,655,487,652,484,653,478,652,477,650,477,642,478,615,478,614,476,615,467,619,461,624,451,624,448,625,448,626,446,623,443,623,441,621,437,621,430,622,428,622,424,620,421,622,419,620,416,621,414,622,407,625,405,624,403,628,397,631,396,631,394,631,392,634,386,636,385,636,384,677,379,677,386,677,404,676,438,676,453,679,473,681,487z"
        },
        {
          "name": "IA",
          "path": "M613,207,614,210,616,211,617,212,618,214,622,218,622,221,622,224,620,228,619,231,617,232,615,233,609,235,607,239,608,241,610,243,610,247,608,249,607,250,607,253,605,254,604,255,603,256,604,259,602,260,599,257,598,254,527,257,526,257,524,252,524,245,522,240,521,235,519,231,518,226,515,217,513,212,512,209,510,206,512,201,514,195,511,193,510,190,511,187,513,187,602,186,603,190,606,192,606,193,604,197,604,201,607,205,609,206,613,207,613,207z"
        },
        {
          "name": "MN",
          "path": "M512,131,512,122,510,114,508,100,507,89,505,85,503,80,503,69,504,65,502,59,535,59,535,50,536,50,538,50,540,51,541,57,543,64,545,65,550,65,550,67,557,67,557,70,562,70,562,68,564,67,566,66,567,67,571,67,575,70,581,73,583,73,584,72,585,72,586,75,589,76,589,76,590,76,590,78,593,79,597,79,598,78,602,75,605,74,605,76,606,78,607,78,608,77,618,76,620,80,620,80,621,79,626,78,625,81,621,83,611,87,606,89,602,92,600,96,597,100,596,101,591,106,589,106,585,109,582,113,582,116,582,125,580,127,575,131,572,137,575,140,576,143,574,147,574,151,575,158,578,161,582,161,584,165,587,165,591,171,599,176,601,179,602,186,515,187,514,148,514,145,509,142,508,140,508,138,510,136,512,135,512,131z"
        },
        {
          "name": "OK",
          "path": "M410,338,392,337,391,349,413,350,448,351,445,378,445,397,445,398,449,402,452,404,452,403,453,401,455,403,457,403,457,402,460,403,459,407,464,408,466,409,471,410,474,412,476,409,480,410,482,414,483,414,483,416,486,417,488,414,490,415,493,415,494,418,501,420,502,419,504,415,506,415,507,417,511,418,515,419,518,420,520,419,521,417,526,417,528,418,531,415,532,415,533,417,537,417,539,415,541,415,543,418,547,420,550,421,552,422,552,382,550,370,550,361,549,354,548,346,548,342,535,342,485,342,436,340,410,338z"
        },
        {
          "name": "TX",
          "path": "M390,349,414,350,447,351,445,376,445,396,445,398,449,402,452,404,453,403,453,401,454,403,457,403,457,402,459,403,460,403,459,407,464,408,467,409,471,409,474,412,476,409,480,410,482,413,484,414,483,416,486,417,488,415,491,415,493,415,494,418,501,420,503,419,504,415,505,415,505,415,507,417,511,418,515,419,518,420,520,419,521,417,526,417,528,418,531,415,532,415,533,417,537,417,539,415,541,415,543,418,547,420,550,421,552,422,554,424,557,423,560,424,561,431,561,441,562,451,562,455,565,460,566,465,571,471,571,475,572,475,571,484,568,490,570,492,569,495,568,503,567,506,567,510,561,512,550,517,549,519,546,521,544,522,543,523,537,529,534,531,528,535,522,537,515,541,513,543,507,546,503,547,499,553,495,553,494,555,496,558,494,563,493,568,492,573,491,577,492,580,494,588,495,594,497,597,496,599,492,601,486,597,480,595,479,596,476,595,471,592,465,591,457,587,455,583,454,576,450,574,449,571,450,571,450,567,449,566,448,565,450,561,448,558,444,557,441,552,437,545,432,542,433,540,427,527,426,522,424,520,424,519,418,513,415,509,415,508,412,506,405,505,397,504,393,502,388,504,385,505,382,509,381,513,376,519,374,522,371,521,369,520,367,519,363,516,363,516,361,514,355,511,347,503,345,498,345,489,341,482,341,479,339,478,338,476,332,474,331,472,323,463,322,460,317,458,315,453,313,450,311,449,310,444,318,445,350,448,381,450,383,429,388,369,389,349,391,349M498,596,497,588,494,581,493,573,495,564,499,557,502,551,506,547,506,547,501,555,497,562,494,569,494,574,495,581,498,589,498,594,499,596,498,596z"
        },
        {
          "name": "NM",
          "path": "M311,449,310,444,319,445,351,448,381,450,383,430,387,369,389,348,391,349,392,337,280,325,261,455,278,457,279,446,311,449z"
        },
        {
          "name": "KS",
          "path": "M547,342,534,342,484,342,436,339,409,338,414,268,437,269,481,270,529,271,534,271,536,274,539,273,540,275,540,278,538,280,538,282,540,286,543,289,546,291,547,303,547,342z"
        },
        {
          "name": "NE",
          "path": "M524,252,527,259,527,262,531,268,534,271,528,271,482,270,438,269,414,268,415,245,380,242,385,195,401,196,423,197,442,198,468,200,479,199,482,202,487,205,488,206,493,204,497,204,500,203,502,205,506,207,509,208,510,210,511,212,513,212,514,212,515,217,518,227,518,231,521,235,522,240,524,245,524,252z"
        },
        {
          "name": "SD",
          "path": "M513,212,513,212,510,206,512,201,514,195,511,193,510,190,511,187,515,187,515,182,514,149,514,145,509,141,508,140,508,138,510,136,512,134,512,132,449,130,390,126,385,195,400,196,422,197,441,198,467,199,479,199,482,201,487,205,488,206,493,204,500,204,502,205,506,207,509,208,510,210,511,212,513,212z"
        },
        {
          "name": "ND",
          "path": "M512,131,512,122,510,115,508,101,507,89,505,86,503,80,503,69,504,65,502,59,471,58,451,58,423,56,398,54,390,126,450,130,512,131z"
        },
        {
          "name": "WY",
          "path": "M388,147,273,132,258,228,380,242,388,147z"
        },
        {
          "name": "MT",
          "path": "M398,54,365,51L333,47,302,43,267,37,247,33,212,26,207,49,211,57,209,62,211,67,215,68,220,80,222,83,223,84,227,86,227,88,220,107,220,110,222,113,223,113,228,110,229,109,231,109,231,115,234,129,237,131,238,132,240,134,239,138,240,142,241,143,244,140,247,140,250,142,253,141,257,141,261,143,264,142,265,139,268,138,269,140,270,143,271,144,273,132,388,147,398,54z"
        },
        {
          "name": "CO",
          "path": "M410,338,415,245,293,232,279,326,410,338z"
        },
        {
          "name": "ID",
          "path": "M160,183,169,145,171,140,174,134,172,131,170,131,169,130,169,129,170,126,174,120,176,119,178,118,178,115,179,114,183,108,188,103,188,99,184,96,182,91,197,23,212,26,207,49,211,57,209,62,211,67,215,68,219,78,223,83,223,84,227,86,227,88,220,107,219,109,222,113,223,113,228,110,229,109,231,109,231,115,234,129,238,132,240,134,239,139,240,142,241,143,244,140,247,140,250,142,253,141,257,141,261,143,264,142,265,139,268,138,269,140,270,143,271,144,262,202C262,202,168,184,160,183z"
        },
        {
          "name": "UT",
          "path": "M280,327,189,314,212,193,262,202,260,213,258,228,266,229,284,231,293,231,280,327z"
        },
        {
          "name": "AZ",
          "path": "M156,405,153,407,153,409,153,410,174,421,187,429,203,439,221,449,234,452,261,455,280,327,189,314,186,331,184,331,182,334,180,334,178,331,175,331,174,330,174,330,173,330,170,331,170,339,170,341,169,354,168,357,167,360,170,365,172,372,172,373,174,373,173,376,172,377,168,379,166,381,164,385,164,391,161,393,158,394,159,395,158,397,159,398,162,398,162,401,160,404,156,405z"
        },
        {
          "name": "NV",
          "path": "M212,192,186,331,184,332,182,334,180,334,178,331,176,331,175,330,174,330,171,331,170,339,170,345,169,354,168,356,165,355,91,243,111,170,212,192z"
        },
        {
          "name": "OR",
          "path": "M160,182,170,144,171,139,173,133,173,132,170,132,169,130,169,129,170,125,175,119,177,118,178,117,179,113,184,107,188,103,188,99,184,96,182,91,169,88,152,84,136,84,135,82,129,85,125,84,122,82,121,83,116,83,114,81,108,79,107,79,103,78,100,80,94,79,87,75,88,74,88,65,86,61,82,61,81,58,78,57,72,60,70,67,66,77,63,84,57,100,50,114,42,128,39,131,39,140,39,153,160,182z"
        },
        {
          "name": "WA",
          "path": "M110,1,115,2,125,5,134,7,156,13,181,19,197,23,182,91,169,88,152,84,136,84,135,82,129,85,124,84,122,82,121,83,116,83,114,81,108,79,107,79,103,78,101,79,94,79,87,75,88,74,88,65,86,61,81,61,81,58,78,57,74,59,72,55,72,52,75,52,77,47,74,46,74,42,79,42,76,39,75,31,75,28,75,19,73,16,76,6,78,6,81,9,84,12,87,14,92,16,95,17,98,19,102,20,105,20,105,17,106,16,108,14,109,16,109,18,106,18,106,20,108,22,109,24,110,27,112,26,112,25,111,24,110,20,111,18,110,17,110,14,112,10,111,8,108,2,109,1,110,1zM100,7,102,7,102,8,104,7,107,7,108,8,106,10,107,11,106,13,104,14C104,14,103,14,103,13,103,13,105,11,105,11L103,10,103,11,102,12,100,10,100,7z"
        },
        {
          "name": "CA",
          "path": "M156,404,160,404,162,402,162,398,159,398,158,397,158,395,158,394,160,394,164,390,164,385,166,381,168,379,172,377,173,376,174,373,172,373,171,372,170,365,167,360,168,356,165,355,91,243,111,170,39,153,37,158,37,166,31,179,28,182,28,183,26,184,24,188,23,192,26,196,28,201,29,205,29,212,27,215,26,221,25,225,27,230,30,234,33,240,34,244,34,247,33,248,33,250,40,257,39,260,38,262,38,264,38,273,40,277,42,280,45,280,46,283,45,287,43,289,41,289,41,293,41,296,45,301,46,307,48,312,49,315,53,321,54,324,55,327,57,328,57,331,56,333,54,341,53,343,56,346,61,346,65,348,70,350,73,350,76,354,79,359,80,361,84,364,89,365,91,367,92,370,90,371,90,372,94,373,97,373,100,371,104,376,105,378,108,383,108,386,108,396,109,398,120,400,141,403,156,404zM61,357,62,359,62,360,59,360,58,359,57,357,61,357zM63,357,64,356,68,359,71,360,70,361,66,360,64,359,63,357zM85,378,87,381,88,382,90,383,90,381,89,379,86,377,85,377,85,378zM84,388,86,391,87,393,85,394,84,392C84,392,83,391,83,390,83,390,83,388,83,388L84,388z"
        }
    ];

    var mapIndex = -1;
    var populateMapData = setInterval(function() {
      mapIndex++;
      if (mapIndex >= mapData.length) {
        clearInterval(populateMapData);
      };
      var nytUri = 'http://api.nytimes.com/svc/elections/us/v3/finances/2008/president/states/' + mapData[mapIndex].name + '.json?api-key=85c32d59cd9256167606de14f60ebe95:11:20721543&callback=JSON_CALLBACK';
      $http.jsonp(nytUri).success(function (data) {
        mapData[mapIndex].value = data.results[0].total;
        mapData[mapIndex].candidate = data.results[0].full_name;
        console.log(mapData[mapIndex]);
      });
    }, 100);

    $scope.chartConfig = {
      options: {
      chart: {
          type: 'map'
        }
      },

      title : {
            text : 'Top donations to all presidential candidates by state'
        },

      colorAxis: {},

      legend: {
          align: 'left',
          floating: true,
          title: {
              text: 'Top candidate donations by state'
          }
      },
      tooltip: {
        formatter: function () {
            return '<b>Series name: ' + this.point.candidate + '</b><br>' +
                'Point name: ' + this.point.name + '<br>' +
                'Value: ' + this.point.value;
      }
      },
      series : [{
          data : mapData,
          name: 'Top candidate donations by state',
          dataLabels: {
              enabled: true,
              format: '{point.name}',
              style: {
                  color: 'black',
                  fontWeight: 'bold',
                  textShadow: '0 0 3px white'
              }
          },
          states: {
              hover: {
                  color: '#BADA55'
              }
          }
      }]
    }
  };

  $scope.partySpend = function () {
  	$http.jsonp('http://api.nytimes.com/svc/elections/us/v3/finances/2008/president/totals.json?api-key=85c32d59cd9256167606de14f60ebe95:11:20721543&callback=JSON_CALLBACK').success(function (data) {
      // $scope.chartConfig.series.push = data.results[0].total_receipts;
  		var demSpend = 0;
  		var repubSpend= 0;
  		for (var i = 0; i < data.results.length; i++) {
				if (data.results[i].party == "D") {
					demSpend += parseInt(data.results[i].total_receipts);
				} else {
					repubSpend += parseInt(data.results[i].total_receipts);
				}
  		}
  		var totalSpend = [['Democrats',demSpend],['Republicans', repubSpend]]
	    $scope.chartConfig = {
        options: {
            chart: {
                type: 'pie'
            }
        },
        series: [{
            data: totalSpend,
            name: 'Party Spend'
        }],
        title: {
        	text: 'US 2008 Campaign Spend by Party'
    		},
    		plotOptions: {
          pie: {
              allowPointSelect: true,
              cursor: 'pointer',
          }
    		},	
        loading: false
	    }
      console.log($scope.chartConfig.series[0].data.length);
  	});
  };

  $scope.candidateReceipts = function () {
    var nytUri = 'http://api.nytimes.com/svc/elections/us/v3/finances/2008/president/totals.json?api-key=85c32d59cd9256167606de14f60ebe95:11:20721543&callback=JSON_CALLBACK'
  	$http.jsonp(nytUri).success(function (data) {
      // $scope.chartConfig.series.push = data.results[0].total_receipts;
  		var cd = [];
  		var names = [];
  		for (var i = 0; i < data.results.length; i++) {
  				var receipt = []
  				receipt = parseInt(data.results[i].total_receipts);
  				cd.push(receipt);
  				names.push(data.results[i].candidate_name);
      }
	    $scope.chartConfig = {
        options: {
            chart: {
                type: 'bar'
            }
        },
        series: [{
            data: cd,
        }],
        xAxis: {
      		categories: names, 
        	},
          title: {
              text: 'US 2008 Campaign Total Receipts by Candidate'
          },

        loading: false
	    }
  	});       
  };
});
